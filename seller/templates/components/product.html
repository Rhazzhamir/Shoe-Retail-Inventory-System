{% load static %}

<main class="category_main text-start">
    <div class="categories container-fluid p-3 d-flex flex-column">
        <div class="d-flex flex-row justify-content-stat align-items-start text-start">
            <ul class="d-flex list-unstyled ">
                <li class="me-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                        <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"/>
                    </svg>
                </li>
                <li class="me-2 mt-1">></li>
                <li class="me-2 mt-1">Product</li>
                <li class="me-2 mt-1">></li>
                <li class="me-2 mt-1">Categories</li>
            </ul>
        </div>
        <div class="d-flex align-items-center mt-3"> Â 
            <h1 class="noto-serif-ahom-regular m-0 flex-grow-1 text-light ">Product</h1>
            <div class="d-flex">
                <button class="download btn btn-primary btn-sm rounded-2 me-2">
                    <svg class="svgIcon" viewBox="0 0 384 512" height="1em" xmlns="http://www.w3.org/2000/svg">
                        <path d="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"></path>
                    </svg>
                    <span class="icon2"></span>
                    <span class="tooltip">Download</span>
                </button>
                <button type="button" class="btn btn-primary Add_product_btn btn btn-primary btn-sm rounded-2 me-4" data-bs-toggle="modal" data-bs-target="#productModal">
                    New Product
                </button>
                {% include 'components/Modal/Product_Modal/product_modal.html'%}
            </div>
        </div>
    </div>

    <section class="p-5 ">
       <div class="select">
    <div
        id="selected"
        class="selected"
        data-default="All"
    >
        <span id="selected-text"></span>
        <svg
        xmlns="http://www.w3.org/2000/svg"
        height="1em"
        viewBox="0 0 512 512"
        class="arrow"
        >
        <path
            d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"
        ></path>
        </svg>
    </div>
    <div class="options">
        <div title="all">
            <input id="all" name="option" type="radio" checked="" />
            <label class="option" for="all" data-txt="All"></label>
        </div>
        {% for category in categories %}
        <div >
            <input id="{{ category.id }}" name="option" type="radio" />
            <label class="option" for="{{ category.id }}" data-txt="{{ category.category_name }}"> </label>
        </div>
        {% endfor %}
    </div>
</div>
        <script>
document.addEventListener('DOMContentLoaded', function() {
    const selectedText = document.getElementById('selected-text');
    const options = document.querySelectorAll('.options .option');

    options.forEach(option => {
        option.addEventListener('click', function() {
            const text = this.getAttribute('data-txt');
            selectedText.textContent = text;
        });
    });

    // Handle the "All" option separately
    const allOption = document.querySelector('.options [for="all"]');
    allOption.addEventListener('click', function() {
        selectedText.textContent = 'All';
    });
});
</script>

        <div class="table-responsive">
    <table class="table table-hover">
        <thead>
            <tr>
                <th class="text-light" scope="col">Id</th>
                <th class="text-light" scope="col">Name</th>
                <th class="text-light" scope="col">Image</th>
                <th class="text-light" scope="col">Description</th>
                <th class="text-light" scope="col">Category</th>
                <th class="text-light" scope="col">Price</th>
                <th class="text-light" scope="col">Stock</th>
                <th class="text-light" scope="col">Created At</th>
                <th class="text-light" scope="col">Updated At</th>
                <th class="text-light" scope="col">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <th class="text-light" scope="row">{{ product.id }}</th>
                <td class="text-light">{{ product.product_name }}</td>
                <td class="text-light">
                    <img src="{{ product.image.url }}" alt="{{ product.product_name }}" style="width: 80px; height: 35px;">
                </td>
                <td class="text-light description">{{ product.description }}</td>
                <td class="text-light">{{ product.category.category_name }}</td>
                <td class="text-light">{{ product.price }}</td>
                <td class="text-light">{{ product.stock }}</td>
                <td class="text-light">{{ product.created_at|date:"Y-m-d H:i:s" }}</td>
                <td class="text-light">{% if product.updated_at %}{{ product.updated_at|date:"Y-m-d H:i:s" }}{% else %}N/A{% endif %}</td>
                <td class="text-light d-flex gap-3">
                    <!-- Edit -->
                    <button class="product_edit" data-bs-toggle="modal" data-bs-target="#productModal" data-product-id="{{ product.id }}" data-product-name="{{ product.product_name }}" data-product-description="{{ product.description }}" data-product-price="{{ product.price }}" data-product-stock="{{ product.stock }}" data-product-image="{{ product.image.url }}" data-product-category="{{ product.category.id }}">
                        <svg height="1em" viewBox="0 0 512 512">
                            <path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"></path>
                        </svg>
                    </button>
                    <div class="mt-2">|</div>
                    <!-- Delete -->
                    <form method="POST" action="{% url 'seller:delete_product' product.id %}" onsubmit="return confirm('Are you sure you want to delete this product?');">
                        {% csrf_token %}
                        <button type="submit" class="product_delete mt-2">
                            <svg viewBox="0 0 15 17.5" height="17.5" fill="red" width="15" xmlns="http://www.w3.org/2000/svg" class="icon">
                                <path transform="translate(-2.5 -1.25)" d="M15,18.75H5A1.251,1.251,0,0,1,3.75,17.5V5H2.5V3.75h15V5H16.25V17.5A1.251,1.251,0,0,1,15,18.75ZM5,5V17.5H15V5Zm7.5,10H11.25V7.5H12.5V15ZM8.75,15H7.5V7.5H8.75V15ZM12.5,2.5h-5V1.25h5V2.5Z" id="Fill"></path>
                            </svg>
                        </button>
                    </form>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="10" class="text-danger text-center">No products found</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
    </section>
</main>